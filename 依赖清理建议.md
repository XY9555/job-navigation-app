# Node_modules ä¾èµ–æ¸…ç†å»ºè®®

## ğŸ” ä¾èµ–ä½¿ç”¨æƒ…å†µåˆ†æ

### åç«¯ä¾èµ–æ£€æŸ¥ç»“æœ

| ä¾èµ–åŒ… | å£°æ˜ä½ç½® | ä½¿ç”¨æƒ…å†µ | å»ºè®® |
|--------|---------|---------|------|
| **mongoose** | backend/package.json | âŒ **æœªä½¿ç”¨** | **å¯åˆ é™¤** |
| **node-fetch** | backend/package.json | âŒ **æœªä½¿ç”¨** | **å¯åˆ é™¤** |
| **pg** | backend/package.json | âš ï¸ ä»…åœ¨cloudé…ç½®ä¸­ | ä¿ç•™ï¼ˆç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼‰ |
| **pg-hstore** | backend/package.json | âš ï¸ pgçš„ä¾èµ– | ä¿ç•™ï¼ˆç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼‰ |
| express | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| sequelize | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| sqlite3 | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| bcryptjs | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| jsonwebtoken | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| cors | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| helmet | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| express-rate-limit | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| express-validator | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| multer | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| docx | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| mammoth | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| pdf-parse | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| dotenv | backend/package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| nodemon | backend/package.json | âœ… ä½¿ç”¨ä¸­ï¼ˆå¼€å‘ï¼‰ | ä¿ç•™ |

### å‰ç«¯ä¾èµ–æ£€æŸ¥ç»“æœ

| ä¾èµ–åŒ… | å£°æ˜ä½ç½® | ä½¿ç”¨æƒ…å†µ | å»ºè®® |
|--------|---------|---------|------|
| vue | package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| vue-router | package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| vant | package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| axios | package.json | âœ… ä½¿ç”¨ä¸­ | ä¿ç•™ |
| vite | package.json | âœ… ä½¿ç”¨ä¸­ï¼ˆå¼€å‘ï¼‰ | ä¿ç•™ |
| @vitejs/plugin-vue | package.json | âœ… ä½¿ç”¨ä¸­ï¼ˆå¼€å‘ï¼‰ | ä¿ç•™ |

---

## âŒ å¯ä»¥åˆ é™¤çš„ä¾èµ–

### 1. mongoose (MongoDB ORM)
**åŸå› **: 
- é¡¹ç›®ä½¿ç”¨çš„æ˜¯ SQLite + Sequelizeï¼Œä¸éœ€è¦ MongoDB
- ä»£ç ä¸­å®Œå…¨æ²¡æœ‰ä½¿ç”¨ mongoose
- database-cloud.js ä¸­ä¹Ÿä½¿ç”¨çš„æ˜¯ PostgreSQL + Sequelize

**å½±å“**: 
- mongoose åŠå…¶ä¾èµ–åŒ…çº¦å  **50+ ä¸ªåŒ…**
- ä¼°è®¡å¯èŠ‚çœçº¦ **10-15 MB** ç©ºé—´
- å‡å°‘çº¦ **50,000+ è¡Œ**æ— ç”¨ä»£ç 

**åˆ é™¤å‘½ä»¤**:
```bash
cd backend
npm uninstall mongoose
```

### 2. node-fetch
**åŸå› **:
- Node.js 18+ å·²å†…ç½® fetch API
- ä»£ç ä¸­æ²¡æœ‰ä½¿ç”¨ node-fetch
- åç«¯ä½¿ç”¨åŸç”Ÿ fetch æˆ–å…¶ä»–æ–¹å¼è¿›è¡ŒHTTPè¯·æ±‚

**å½±å“**:
- èŠ‚çœçº¦ **2-3 MB** ç©ºé—´
- å‡å°‘çº¦ **5,000+ è¡Œ**æ— ç”¨ä»£ç 

**åˆ é™¤å‘½ä»¤**:
```bash
cd backend
npm uninstall node-fetch
```

---

## âš ï¸ å»ºè®®ä¿ç•™çš„ä¾èµ–

### pg å’Œ pg-hstore
è™½ç„¶å½“å‰å¼€å‘ç¯å¢ƒä½¿ç”¨ SQLiteï¼Œä½†è¿™ä¸¤ä¸ªåŒ…åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åˆ°äº‘ç«¯æ—¶éœ€è¦ï¼š
- `database-cloud.js` ä¸­é…ç½®äº† PostgreSQL æ”¯æŒ
- ç”Ÿäº§ç¯å¢ƒå¯èƒ½ä½¿ç”¨ PostgreSQL æ•°æ®åº“
- å»ºè®®ä¿ç•™ä»¥æ”¯æŒç”Ÿäº§éƒ¨ç½²

---

## ğŸ“Š æ¸…ç†åçš„æ•ˆæœ

### æ¸…ç†å‰
```
åç«¯ä¾èµ–åŒ…: 302 ä¸ª
åç«¯ä»£ç é‡: çº¦ 678,000 è¡Œ
```

### æ¸…ç†åï¼ˆä¼°ç®—ï¼‰
```
åç«¯ä¾èµ–åŒ…: çº¦ 250 ä¸ª (-52ä¸ª)
åç«¯ä»£ç é‡: çº¦ 623,000 è¡Œ (-55,000è¡Œ)
èŠ‚çœç©ºé—´: çº¦ 15-20 MB
```

---

## ğŸ”§ æ¸…ç†æ­¥éª¤

### 1. å¤‡ä»½å½“å‰çŠ¶æ€
```bash
# å¤‡ä»½ package.json
cp backend/package.json backend/package.json.backup
```

### 2. åˆ é™¤æ— ç”¨ä¾èµ–
```bash
cd backend
npm uninstall mongoose node-fetch
```

### 3. æ¸…ç† node_modules
```bash
# åˆ é™¤æ•´ä¸ª node_modules æ–‡ä»¶å¤¹
rm -rf node_modules

# é‡æ–°å®‰è£…ï¼ˆåªå®‰è£…éœ€è¦çš„åŒ…ï¼‰
npm install
```

### 4. æµ‹è¯•åº”ç”¨
```bash
# å¯åŠ¨åç«¯æµ‹è¯•
npm run dev

# æµ‹è¯•æ‰€æœ‰åŠŸèƒ½æ˜¯å¦æ­£å¸¸
```

---

## ğŸ’¡ é¢å¤–ä¼˜åŒ–å»ºè®®

### 1. ä½¿ç”¨ npm prune
æ¸…ç†æœªåœ¨ package.json ä¸­å£°æ˜çš„åŒ…ï¼š
```bash
cd backend
npm prune
```

### 2. æ£€æŸ¥é‡å¤ä¾èµ–
```bash
npm dedupe
```

### 3. åˆ†æä¾èµ–æ ‘
```bash
npm list --depth=0
```

### 4. ä½¿ç”¨ production æ¨¡å¼å®‰è£…
ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶ï¼Œä¸å®‰è£… devDependenciesï¼š
```bash
npm install --production
```

---

## ğŸ“‹ æ›´æ–°åçš„ package.json

### backend/package.json (å»ºè®®ç‰ˆæœ¬)
```json
{
  "name": "backend",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "dependencies": {
    "bcryptjs": "^3.0.2",
    "cors": "^2.8.5",
    "docx": "^9.5.1",
    "dotenv": "^17.2.3",
    "express": "^5.1.0",
    "express-rate-limit": "^8.2.1",
    "express-validator": "^7.3.0",
    "helmet": "^8.1.0",
    "jsonwebtoken": "^9.0.2",
    "mammoth": "^1.11.0",
    "multer": "^2.0.2",
    "pdf-parse": "^1.1.1",
    "sequelize": "^6.37.7",
    "sqlite3": "^5.1.7",
    "pg": "^8.11.3",
    "pg-hstore": "^2.3.4"
  },
  "devDependencies": {
    "nodemon": "^3.1.10"
  }
}
```

**åˆ é™¤çš„ä¾èµ–**:
- âŒ mongoose
- âŒ node-fetch

---

## âš¡ æ€§èƒ½æå‡

æ¸…ç†æ— ç”¨ä¾èµ–åçš„å¥½å¤„ï¼š

1. **å®‰è£…é€Ÿåº¦æ›´å¿«**: npm install æ—¶é—´å‡å°‘çº¦ 20-30%
2. **å ç”¨ç©ºé—´æ›´å°**: é¡¹ç›®ä½“ç§¯å‡å°‘ 15-20 MB
3. **å¯åŠ¨é€Ÿåº¦æ›´å¿«**: å‡å°‘ä¸å¿…è¦çš„ä¾èµ–åŠ è½½
4. **ç»´æŠ¤æ›´ç®€å•**: ä¾èµ–æ ‘æ›´æ¸…æ™°ï¼Œæ›´æ–°æ›´å®¹æ˜“
5. **å®‰å…¨æ€§æå‡**: å‡å°‘æ½œåœ¨çš„å®‰å…¨æ¼æ´æ¥æº

---

## âœ… éªŒè¯æ¸…å•

æ¸…ç†å®Œæˆåï¼Œè¯·éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•æ­£å¸¸
- [ ] ç®€å†åˆ›å»º/ç¼–è¾‘æ­£å¸¸
- [ ] AIç®€å†è¯„æµ‹åŠŸèƒ½æ­£å¸¸
- [ ] èŒä½åŒ¹é…åˆ†ææ­£å¸¸
- [ ] é¢è¯•é—®é¢˜ç”Ÿæˆæ­£å¸¸
- [ ] Wordæ–‡æ¡£ç”Ÿæˆæ­£å¸¸
- [ ] PDFæ–‡æ¡£è§£ææ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®åº“è¯»å†™æ­£å¸¸

---

**å»ºè®®**: å…ˆåœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•æ¸…ç†æ•ˆæœï¼Œç¡®è®¤æ— é—®é¢˜åå†åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚
